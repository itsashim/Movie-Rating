{"ast":null,"code":"import _regeneratorRuntime from\"/home/ashim/Desktop/Popcorn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ashim/Desktop/Popcorn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ashim/Desktop/Popcorn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";export function useMovies(query){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var key=\"91899472\";useEffect(function(){var controller=new AbortController();function movieList(){return _movieList.apply(this,arguments);}function _movieList(){_movieList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var movieFetch,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setError(\"\");setLoader(true);_context.next=5;return fetch(\"http://www.omdbapi.com/?apikey=\".concat(key,\"&s=\").concat(query),{signal:controller.signal});case 5:movieFetch=_context.sent;if(movieFetch.ok){_context.next=8;break;}throw new Error(\"Error on loading\");case 8:_context.next=10;return movieFetch.json();case 10:json=_context.sent;if(!(json.Response===\"False\")){_context.next=13;break;}throw new Error(\"Movie not found\");case 13:setMovies(json.Search);// console.log(json.Search);\nsetError(\"\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);if(!_context.t0.name!==\"AbortError\"){setError(_context.t0.message);}case 20:_context.prev=20;setLoader(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}},_callee,null,[[0,17,20,23]]);}));return _movieList.apply(this,arguments);}if(!query.length){setMovies([]);setError(\"Search something great to watch!\");return;}// handleCloseDetail();\nmovieList();return function(){controller.abort();};},[query]);return{movies:movies,loader:loader,error:error};}","map":{"version":3,"names":["useEffect","useState","useMovies","query","_useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","loader","setLoader","_useState5","_useState6","error","setError","key","controller","AbortController","movieList","_movieList","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","movieFetch","json","wrap","_callee$","_context","prev","next","fetch","concat","signal","sent","ok","Error","Response","Search","t0","name","message","finish","stop","length","abort"],"sources":["/home/ashim/Desktop/Popcorn/src/useMovies.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport function useMovies(query) {\n  const [movies, setMovies] = useState([]);\n  const [loader, setLoader] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const key = \"91899472\";\n\n  useEffect(\n    function () {\n      const controller = new AbortController();\n\n      async function movieList() {\n        try {\n          setError(\"\");\n          setLoader(true);\n          const movieFetch = await fetch(\n            `http://www.omdbapi.com/?apikey=${key}&s=${query}`,\n            { signal: controller.signal }\n          );\n          if (!movieFetch.ok) {\n            throw new Error(\"Error on loading\");\n          }\n          const json = await movieFetch.json();\n          if (json.Response === \"False\") throw new Error(\"Movie not found\");\n\n          setMovies(json.Search);\n          // console.log(json.Search);\n          setError(\"\");\n        } catch (err) {\n          if (!err.name !== \"AbortError\") {\n            setError(err.message);\n          }\n        } finally {\n          setLoader(false);\n        }\n      }\n      if (!query.length) {\n        setMovies([]);\n        setError(\"Search something great to watch!\");\n        return;\n      }\n      // handleCloseDetail();\n      movieList();\n\n      return function () {\n        controller.abort();\n      };\n    },\n    [query]\n  );\n\n  return { movies, loader, error };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}